function minimap(e){room_top=Math.floor(e/side),room_left=e-side*room_top;var t=-27+6*room_left,o=-136+6*room_top;26==side&&(t=-25+2*room_left,o=-131+2*room_top),-1!=e&&($("#minimap-my_position").css({left:""+t+"px"}),$("#minimap-my_position").css({top:""+o+"px"}),$("#minimap-my_position").css({opacity:"1"}),$("#minimap-background").css({opacity:"1"}),$("#minimap-text").empty(),$("#minimap-text2").css({opacity:"0"}),$("#minimap-text2").empty(),$("#minimap-text2").prepend("Lobby")),-1==e&&($("#minimap-my_position").css({opacity:"0"}),$("#minimap-background").css({opacity:"0"}),$("#minimap-text").empty(),$("#minimap-text").prepend("Lobby"),$("#minimap-text2").css({opacity:"0"}),$("#minimap-text2").empty())}function draw_lobby(e){lobby_create(e),cell_activation_lobby(),minimap(id_table)}function lobby_create(e){var t=document.getElementsByClassName("table")[0];t.innerHTML="",-1!=id_table&&(id_table_old=id_table),id_table=-1;for(var o=0;o<side;o++){for(var i=document.createElement("tr"),a=0;a<side;a++){var n=document.createElement("td"),c=o*side+a;c==id_table_old&&0==e.new_game&&(n.style.border="1px #f25700 dashed"),n.style.backgroundColor=0==e.colors[c]?"hsl(200,100%,20%)":1==e.colors[c]?"hsl(200,100%,80%)":"hsl(200,100%,"+(40*e.colors[c]+30)+"%)",n.className="room",n.id=""+c,i.appendChild(n)}t.appendChild(i)}}function room_create(e){var t=document.getElementsByClassName("table")[0];t.innerHTML="";for(var o=0;o<side;o++){for(var i=document.createElement("tr"),a=0;a<side;a++){var n=document.createElement("td"),c=o*side+a;n.className=0==e[c]?"cell":"cell_seen",n.id=""+c,i.appendChild(n)}t.appendChild(i)}}var side2=side*side,side4=side2*side2,id_table=-1,id_table_old=-1;window.onload=function(){};var socket=io.connect();socket.on("o",function(){socket.emit("g")});var change=function(){"cell"==this.className&&(this.className="cell_seen",socket.emit("n",{id_table:id_table,id_cell:parseInt(this.id)}))},draw_room_this=function(){id_table=parseInt(this.id),socket.emit("r",id_table)},lobby=function(){socket.emit("l")},draw_room=function(e){draw_room_emission(10==side||1==e||-1==e?e:10==e?26:-26)},draw_room_emission=function(e){-1==id_table||side2>id_table+e&&id_table+e>=0&&(-1==e&&id_table%side==0||1==e&&id_table%side==side-1||(id_table=parseInt(id_table+e),socket.emit("r",id_table)))};socket.on("z",function(e){e.id_table==id_table?draw_cell(e):-1==id_table&&draw_lobby({colors:e.colors,new_game:0})});var draw_cell=function(e){id_table==e.id_table&&(document.getElementById(e.id_cell).className="cell_seen")};socket.on("p",function(e){$("#nb_players").empty().prepend(e)}),socket.on("b",function(e){draw_lobby(e)});var cell_activation_lobby=function(){for(var e=document.getElementsByClassName("room"),t=0;t<e.length;t++)e[t].onclick=draw_room_this};socket.on("c",function(e){room_create(e),cell_activation(),minimap(id_table)});var cell_activation=function(){for(var e=document.getElementsByClassName("cell"),t=0;t<e.length;t++)e[t].onclick=change};socket.on("f",function(){$("html").fadeOut(1),$("html").fadeIn(1e4)}),socket.on("ss",function(){$("html").fadeOut(1),setTimeout(function(){var e=prompt("You win! What will be the name of this draw? (max. 30 characters)");socket.emit("s",e)},10)}),socket.on("tt",function(){$("html").fadeOut(1),setTimeout(function(){var e=prompt("You win! What will be the name of this draw? (max. 30 characters)");socket.emit("t",e)},10)}),socket.on("uu",function(){$("html").fadeOut(1),setTimeout(function(){var e=prompt("You win! What will be the name of this draw? (max. 30 characters)");socket.emit("u",e)},10)}),socket.on("vv",function(){$("html").fadeOut(1),setTimeout(function(){var e=prompt("You win! What will be the name of this draw? (max. 30 characters)");socket.emit("v",e)},10)}),socket.on("ww",function(){$("html").fadeOut(1),setTimeout(function(){var e=prompt("You win! What will be the name of this draw? (max. 30 characters)");socket.emit("w",e)},10)}),socket.on("xx",function(){$("html").fadeOut(1),setTimeout(function(){var e=prompt("You win! What will be the name of this draw? (max. 30 characters)");socket.emit("x",e)},10)});
